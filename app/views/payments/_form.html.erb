<%= form_for(@payment) do |f| %>
  <% if @payment.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@payment.errors.count, "error") %> prohibited this payment from being saved:</h2>

      <ul>
      <% @payment.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <h2><%= @customer.products.sum(:price).to_f %></h2>

  <div class="field">
    <%= f.hidden_field :customer_id, value:@customer.id %>
    <h2><%= @customer.first_name + " " + @customer.last_name%></h2>
  </div>
  
  <div class="field">
    <%= f.text_field :payment %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>

<table class="table table-bordered table-hover">
  <thead>
    <tr>
      <th>Date</th>
      <th>Payment In Rs.</th>
      <th>Link</th>
    </tr>
  </thead>

  <tbody>
    <%@payments.each do |payment| %>
      <tr>
        <td><%= payment.created_at.strftime("%d/%b/%Y") %></td>
        <td><%= payment.payment %></td>
        <td><%= link_to 'Edit', edit_payment_path(payment, cust_id: payment.customer.id) %></td>
      </tr>
    <% end %>
  </tbody>
</table>